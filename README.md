Модуль контроля подачи материала для Klipper.

Этот модуль предоставляет управление подачей материала на 3D-принтере с использованием трёх датчиков:

upper_sensor (верхний датчик)

lower_sensor (нижний датчик)

feed_output (выходной, управляет подачей материала)

Датчики посылают дискретные сигналы: материал есть или материала нет.

Когда срабатывает нижний датчик, происходит активация подачи материала.
Подача материала продолжается, пока не сработает верхний датчик, после чего она прекращается.
Подача материала управляется включением и отключением сигнала (дискретный сигнал).

Установка:

Добавьте модуль, расположенный в klippy/extras/material_feed.py, в вашу установку Klipper.
После установки импортируйте класс MaterialFeed в файл klippy/extras/__init__.py.

Конфигурация указывается в файле printer.cfg . Укажите пины для датчиков в зависимости от вашего микроконтроллера. 

Необходимые параметры конфигурации:

upper_sensor_pin,
lower_sensor_pin,
feed_pin,

Вы также можете указать значения пинов при включении или отключении датчиков:

value_upper,
shutdown_value_upper,
value_lower,
shutdown_value_lower,
value_feed,
shutdown_value_feed,

По умолчанию эти значения установлены в 0. Указывать их необязательно, они могут быть использованы для тестирования.

Тестирование:

Тестовые данные предусмотрены для использования с виртуальным контроллером SIMULAVR на AVR atmega644p.

Для подробной инструкции по установке, обратитесь к документации Klipper по отладке, раздел "Testing with simulavr".
https://www.klipper3d.org/Debugging.html

Конфигурационный файл принтера (printer.cfg) находится в корне проекта.